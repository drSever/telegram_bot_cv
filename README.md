# Telegram Bot для детекции и сегментации объектов
студент Журавлев Александр

Telegram-бот, который объединяет методы детекции и сегментации объектов на фотографиях с использованием YOLOv8 и zero-shot подходов.

## Функциональность

### Этап 1: Детекция объектов
- Пользователь отправляет фотографию
- Бот анализирует изображение с помощью YOLOv8
- Возвращает список найденных классов объектов с их визуализацией в виде ограничительных рамок 

### Этап 2: Zero-shot сегментация 
- Пользователь выбирает интересующие классы
- Бот выполняет сегментацию для каждого выбранного класса
- Визуализирует результаты с масками
- Предоставляет статистику по количеству объектов

## Установка и запуск

### 1. Установка зависимостей
Если используете *pip*
```bash
pip install -r requirements.txt
```
Если используете *conda*
```bash
conda env create -f requirements.yml
```

### 2. Настройка бота
1. Создайте бота через @BotFather в Telegram
2. Получите токен бота
3. Создайте и отредактируйте файл `.env` и укажите ваш токен:
```
BOT_TOKEN=<your_actual_bot_token_here>
```

### 3. Запуск бота
```bash
python bot.py
```

**Примечание**: При первом запуске автоматически скачаются модели:
- *YOLOv8n.pt* (~6.5MB) - для детекции
- *YOLOv8n-seg.pt* (~7.1MB) - для сегментации


## Структура проекта

```
├── bot.py                    # Основной файл бота с парсером
├── detection.py              # YOLOv8 детекция + сегментация
├── config.py                 # Конфигурация и сообщения (с поддержкой .env)
├── requirements.txt          # Зависимости для использующих pip
├── requirements.yml          # Зависимости для использующих conda / Anaconda
├── .env                      # Ваши конфиденциальные переменные окружения (не в git)
└── README.md                 # Основная документация
```

## Особенности детекции

### Настройки обработки изображений:
- **Максимальный размер**: 1280px (автоматическое масштабирование)
- **Порог уверенности**: 0.5 (настраивается)
- **Минимальная площадь объекта**: 400 пикселей
- **Модели**: YOLOv8n (детекция) + YOLOv8n-seg (сегментация)

### Поддерживаемые классы:
Бот распознает 80 классов объектов COCO dataset с переводом на русский язык:
- **Люди и животные**: человек, собака, кот, лошадь, птица и др.
- **Транспорт**: автомобиль, велосипед, мотоцикл, автобус, грузовик и др.
- **Предметы быта**: стул, стол, телевизор, ноутбук, телефон и др.
- **Еда**: яблоко, банан, пицца, торт, бутылка и др.

### Интеллектуальный выбор классов:
- Поддержка ввода на английском и русском языках
- Автоматическое сопоставление названий классов
- Подсказки с примерами команд для пользователя

## Использование

1. Отправьте команду `/start`
2. Загрузите фотографию
3. Получите список найденных объектов с визуализацией
4. Выберите интересующие классы (например: `car person bicycle`)
5. Получите результаты сегментации и статистику

## Примеры команд

- `/start` - начать работу с ботом
- `/help` - показать справку
- Отправка фото - запуск анализа
- `car person` - выбор классов для сегментации (в данном случае 2 класса: car и person)

